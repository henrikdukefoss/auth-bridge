<!DOCTYPE html>
<html>
  <head><title>Redirecting....</title></head>
  <body>
    <script>
      const params = new URLSearchParams(window.location.hash.slice(1));
      const access_token = params.get("access_token");
      const refresh_token = params.get("refresh_token");

      if (access_token && refresh_token) {
        // Trigger deep link via iframe
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = `overlai://auth?access_token=${access_token}&refresh_token=${refresh_token}`;
        document.body.appendChild(iframe);

        // Redirect to site after 1 second
        setTimeout(() => {
          window.location.href = "https://www.overl.ai";
        }, 10000);
      } else {
        document.body.innerText = "Token(s) missing!";
        console.error("‚ùå Missing token(s):", { access_token, refresh_token });
      }
    </script>
  </body>
</html>
